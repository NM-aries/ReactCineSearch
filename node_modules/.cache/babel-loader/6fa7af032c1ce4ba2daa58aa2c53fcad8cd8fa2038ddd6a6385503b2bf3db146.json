{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const MovieContext=/*#__PURE__*/createContext();export const useMovies=()=>{const context=useContext(MovieContext);if(!context){throw new Error('useMovies must be used within a MovieProvider');}return context;};export const MovieProvider=_ref=>{let{children}=_ref;const[trendingMovies,setTrendingMovies]=useState([]);const[popularMovies,setPopularMovies]=useState([]);const[topRatedMovies,setTopRatedMovies]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const API_KEY='1b7c076a0e4849aeefd1f3c429c79d3c';// TMDB API Key\nconst BASE_URL='https://api.themoviedb.org/3';const fetchMovies=async endpoint=>{try{const response=await axios.get(`${BASE_URL}${endpoint}?api_key=${API_KEY}&language=en-US&page=1`);return response.data.results;}catch(err){console.error('Error fetching movies:',err);setError('Failed to fetch movies');return[];}};const searchMovies=async query=>{setLoading(true);try{const response=await axios.get(`${BASE_URL}/search/movie?api_key=${API_KEY}&language=en-US&query=${encodeURIComponent(query)}&page=1&include_adult=false`);setLoading(false);return response.data.results;}catch(err){console.error('Error searching movies:',err);setError('Failed to search movies');setLoading(false);return[];}};const getMovieDetails=async movieId=>{try{const response=await axios.get(`${BASE_URL}/movie/${movieId}?api_key=${API_KEY}&language=en-US&append_to_response=videos,credits,similar`);return response.data;}catch(err){console.error('Error fetching movie details:',err);setError('Failed to fetch movie details');return null;}};useEffect(()=>{const loadInitialData=async()=>{setLoading(true);const[trending,popular,topRated]=await Promise.all([fetchMovies('/trending/movie/week'),fetchMovies('/movie/popular'),fetchMovies('/movie/top_rated')]);setTrendingMovies(trending);setPopularMovies(popular);setTopRatedMovies(topRated);setLoading(false);};loadInitialData();},[]);const value={trendingMovies,popularMovies,topRatedMovies,loading,error,searchMovies,getMovieDetails,setError};return/*#__PURE__*/_jsx(MovieContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","axios","jsx","_jsx","MovieContext","useMovies","context","Error","MovieProvider","_ref","children","trendingMovies","setTrendingMovies","popularMovies","setPopularMovies","topRatedMovies","setTopRatedMovies","loading","setLoading","error","setError","API_KEY","BASE_URL","fetchMovies","endpoint","response","get","data","results","err","console","searchMovies","query","encodeURIComponent","getMovieDetails","movieId","loadInitialData","trending","popular","topRated","Promise","all","value","Provider"],"sources":["D:/Development/CineSearch/src/context/MovieContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst MovieContext = createContext();\r\n\r\nexport const useMovies = () => {\r\n  const context = useContext(MovieContext);\r\n  if (!context) {\r\n    throw new Error('useMovies must be used within a MovieProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const MovieProvider = ({ children }) => {\r\n  const [trendingMovies, setTrendingMovies] = useState([]);\r\n  const [popularMovies, setPopularMovies] = useState([]);\r\n  const [topRatedMovies, setTopRatedMovies] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const API_KEY = '1b7c076a0e4849aeefd1f3c429c79d3c'; // TMDB API Key\r\n  const BASE_URL = 'https://api.themoviedb.org/3';\r\n\r\n  const fetchMovies = async (endpoint) => {\r\n    try {\r\n      const response = await axios.get(`${BASE_URL}${endpoint}?api_key=${API_KEY}&language=en-US&page=1`);\r\n      return response.data.results;\r\n    } catch (err) {\r\n      console.error('Error fetching movies:', err);\r\n      setError('Failed to fetch movies');\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const searchMovies = async (query) => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.get(\r\n        `${BASE_URL}/search/movie?api_key=${API_KEY}&language=en-US&query=${encodeURIComponent(query)}&page=1&include_adult=false`\r\n      );\r\n      setLoading(false);\r\n      return response.data.results;\r\n    } catch (err) {\r\n      console.error('Error searching movies:', err);\r\n      setError('Failed to search movies');\r\n      setLoading(false);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const getMovieDetails = async (movieId) => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${BASE_URL}/movie/${movieId}?api_key=${API_KEY}&language=en-US&append_to_response=videos,credits,similar`\r\n      );\r\n      return response.data;\r\n    } catch (err) {\r\n      console.error('Error fetching movie details:', err);\r\n      setError('Failed to fetch movie details');\r\n      return null;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const loadInitialData = async () => {\r\n      setLoading(true);\r\n      const [trending, popular, topRated] = await Promise.all([\r\n        fetchMovies('/trending/movie/week'),\r\n        fetchMovies('/movie/popular'),\r\n        fetchMovies('/movie/top_rated')\r\n      ]);\r\n      \r\n      setTrendingMovies(trending);\r\n      setPopularMovies(popular);\r\n      setTopRatedMovies(topRated);\r\n      setLoading(false);\r\n    };\r\n\r\n    loadInitialData();\r\n  }, []);\r\n\r\n  const value = {\r\n    trendingMovies,\r\n    popularMovies,\r\n    topRatedMovies,\r\n    loading,\r\n    error,\r\n    searchMovies,\r\n    getMovieDetails,\r\n    setError\r\n  };\r\n\r\n  return (\r\n    <MovieContext.Provider value={value}>\r\n      {children}\r\n    </MovieContext.Provider>\r\n  );\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}